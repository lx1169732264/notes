

微服务架构后，链式调用是我们在写程序时候的一般流程，为了这完成一个整体功能会把它拆分成多个函数（或子模块）比如模块A调用模块B，模块B调用模块C，模块C调用模块D。但是大型分布式应用中，系统间的RPC交互复杂，一个功能后面要调用上百个接口并非不可能，

从单机架构过渡到分布式微服务架构，需要:

1，系统解耦，当新的模块进来时，可以做到代码改动最小;  **能够解耦**

2，设置流程缓冲池，可以让后端系统按自身吞吐能力进行消费，不被冲垮; **能够削峰**

3，强弱依赖梳理能把非关键调用链路的操作异步化并提升整体系统的吞吐能力;**能够异步**



横向扩容会导致路由的压力变大 ,所以需要消息队列



# 面向消息的中间件(message-oriented middleware0) MOM

利用高效可靠的消息传递机制进行与平台无关的数据交流，并基于数据通信来进行分布式系统的集成。

通过提供消息传递和消息排队模型在分布式环境下提供应用解耦，弹性伸缩，冗余存储，流量削峰，异步通信，数据同步等

大致流程

发送者把消息发给消息服务器，消息服务器把消息存放在若干队列/主题中，在合适的时候，消息服务器会把消息转发给接受者。

在这个过程中，发送和接受是异步的,也就是发送无需等待，发送者和接受者的生命周期也没有必然关系

在发布pub/订阅sub模式下，也可以完成一对多的通信，可以让一个消息有多个接受者[微信订阅号就是这样的]





